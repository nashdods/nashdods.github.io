!function(){for(var t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,15-Math.floor(+new Date/1e3)%16)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=clearTimeout)}(),function(t){function n(e){this.$target=t(e).addClass("hide"),this.$entries=this.$target.find(".entry"),this.numEintries=this.$entries.length,this.numCols=this._getNumCols(),this.applyGrid(),this.id=n.UId(),t(window).on("resize.flow-grid."+this.id,t.proxy(this.resize,this));var i=this,s=t(window).height(),a=(t(document).height(),s-60);i.$target.addClass("hide").height(a).find(".flow-grid-col").css(Modernizr.prefixedCSS("transform"),"translate(0, "+s+"px)"),setTimeout((function(){i.$target.removeClass("hide"),i.$target.find(".flow-grid-col").css(Modernizr.prefixedCSS("transform"),""),t(window).trigger("resize"),setTimeout((function(){i.$target.css("height",""),t(window).trigger("resize")}),1300+100*(i.numCols-1))}),0)}bq.ui.plugin("navigation",(function(n){n=t.extend({},this.defaults,n);var e="ontouchstart"in window?"touchstart.navigation":"click.navigation",i=t("body");t(document).on(e+".open",n.target+" "+n.btn,(function(s){s.preventDefault(),s.stopPropagation();var a=t(n.target),o=t(this),r=o.closest(n.target),l=t(o.attr("href"));if(i.hasClass(n.bodyOepnClass)&&!r.hasClass(n.oepnClass)){var d=a.filter("."+n.oepnClass).attr("id");i.removeClass(n.bodyOepnClass+" "+d+"-"+n.bodyOepnClass),a.filter("."+n.oepnClass).find(n.btn).trigger(e)}d=r.attr("id"),r.hasClass(n.oepnClass)?(i.removeClass(n.bodyOepnClass+" "+d+"-"+n.bodyOepnClass),l.removeClass(n.oepnClass),r.removeClass(n.oepnClass),t(document).off(e+".close")):(t(document).on(e+".close",(function(i){t(i.target).closest(n.cancelClick).length||(t(document).off(e+".close"),o.trigger(e+".open"))})),r.addClass(n.oepnClass),l.addClass(n.oepnClass),i.addClass(n.bodyOepnClass+" "+d+"-"+n.bodyOepnClass))})),this.closeMenu=function(){var i=t(n.target).filter("."+n.oepnClass);0!=i.length&&i.find(n.btn).trigger(e)}}),{target:".nav",btn:".nav-btn a",oepnClass:"nav-open",bodyOepnClass:"nav-open",cancelClick:".nav, .nav-links > ul, #wrap > #contact .section.section-tabled"}),bq.ui.autoload("navigation",!0),bq.ui.plugin("langnavi",(function(n){n=t.extend({},this.defaults,n),this.reset=function(){var e=t(n.target_items);if(0!=e.length){var i=t(n.target).find("[lang]"),s=t.cookie("lang");s=null==s||"undefined"==s?e.filter("."+n.currentClass).attr("lang"):s,t.cookie("lang",s,{expires:14,path:"/"}),i.not('[lang="'+s+'"]').fadeOut(0),i.filter('[lang="'+s+'"]').fadeIn(500),e.removeClass(n.currentClass),e.filter('[lang="'+s+'"]').addClass(n.currentClass),e.off("click.langnavi").on("click.langnavi",(function(){return t(this).hasClass(n.currentClass)||(e.removeClass(n.currentClass),s=t(this).addClass(n.currentClass).attr("lang"),t.cookie("lang",s,{expires:14,path:"/"}),i.not('[lang="'+s+'"]').fadeOut(500).promise().done((function(){i.filter('[lang="'+s+'"]').fadeIn(500)}))),!1}))}},this.reset()}),{target:".content .section",target_items:".lang-nav a",currentClass:"current"}),bq.ui.autoload("langnavi",!0);var e=1;n.UId=function(){return"fg"+e++},n.prototype={constructor:n,_getNumCols:function(n){return Math.max(1,Math.min(8,Math.round(t(window).width()/400)))},_getFixedEntryHeight:function(n){var e=n.find(".thumb"),i=parseInt(n.css("margin-bottom")),s=e.data("original-width"),a=e.data("original-height");if(0==e.closest(".thumb-wrap").length&&(e.wrap(t('<div class="thumb-wrap" />').css("padding-top",a/s*100+"%")),e.css("position","absolute")),n.hasClass("has-body")){var o=n.find(".body");o.width(380);var r=o.outerHeight();return o.css("width",""),a+r+i}return a+i},reset:function(){this.$target.append(this.$entries),this.$target.find(".flow-grid-col").remove(),this.$target.removeClass(this.colClass)},destory:function(){t(window).off("resize.flow-grid."+this.id)},applyGrid:function(){var n,e,i,s;for(this.grid=[],this.gridInfo=[],this.minIndex=0,i=0;i<this.numCols;i++)this.grid[i]=t('<div class="flow-grid-col"></div>'),this.gridInfo[i]=0;for(e=0;e<this.numEintries;e++)n=this.$entries.eq(e),s=this._getFixedEntryHeight(n),this.grid[this.minIndex].append(n),this.gridInfo[this.minIndex]+=s,this.minIndex=this.gridInfo.indexOf(Math.min.apply(Math,this.gridInfo));this.colClass="col-"+this.numCols,this.$target.addClass(this.colClass).append.apply(this.$target,this.grid)},add:function(n){if(n.length>1){var e=this;n.each((function(){e.add(t(this))}))}else{this.$entries.add(n),this.numEintries=this.$entries.length;var i=this._getFixedEntryHeight(n);this.grid[this.minIndex].append(n),this.gridInfo[this.minIndex]+=i+1,this.minIndex=this.gridInfo.indexOf(Math.min.apply(Math,this.gridInfo))}},resize:function(){var t=this._getNumCols();this.numCols!=t&&(this.numCols=t,this.applyGrid())}},bq.ui.FlowGrid=n,t((function(){var n=t("body");t.browser.mobile&&t("html").addClass("mobile"),bq.ui.autoload(["rollOver","fadeOver","fadeRollOver","popup","formUtils"],!1),t.easing.def=t.bez([.68,0,.42,1]),bq.ui.config({smoothScroll:{offset:40,speed:1e3,easing:t.easing.def,nonScrollClass:"non_scroll):not(.nav-btn a"}}),bq.ui.init(),t(".sub-nav-links").mCustomScrollbar({theme:"sub-nav",scrollbarPosition:"outside",live:"on"}),t(window).on("resize",(function(){t(this).width()<560?n.addClass("cnav-collapse"):n.removeClass("cnav-collapse")})).trigger("resize"),t(document).on({mouseover:function(){if(!n.hasClass("cnav-collapse")){t(this).closest(".nav-links").find(".sub-nav-links").css("display","none");var e=t(this).find(".sub-nav-links");e.length&&e.css("display","")}},mouseout:function(){n.hasClass("cnav-collapse")||(t(this).closest(".nav-links").find(".sub-nav-links").css("display","none"),t(".nav-links:has(.sub-nav-links) > ul > .current").trigger("mouseover"))}},".nav-links:has(.sub-nav-links) > ul > li"),t(".nav-links:has(.sub-nav-links) .sub-nav-links").css("display","none"),t(".nav-links:has(.sub-nav-links) > ul > .current").trigger("mouseover");var e="ontouchstart"in window?"touchstart.cnav-links.bq":"click.cnav-links.bq";t(document).on(e,"#cnavi-links > ul > li > a",(function(){t(this).closest("li").hasClass("current")||(t(this).closest("#cnavi-links").removeClass("has-sub-nav-links").find(".current").removeClass("current"),t(this).closest("li").addClass("current"),t("#cnavi-links:has(> ul > .current .sub-nav-links)").addClass("has-sub-nav-links"))})),t(document).on(e,"#cnavi-links .sub-nav-links a",(function(){t(this).hasClass("current")||(t(this).closest("#cnavi-links").addClass("has-sub-nav-links").find(".current").removeClass("current"),t(this).closest(".sub-nav-links").closest("li").addClass("current"),t(this).addClass("current"))})),t(".nav-links:has(.sub-nav-links) > ul > .current > a").trigger(e)}))}(jQuery),function(t){function n(n,e){this.$bar=t(n),this.options=t.extend({min:0,max:100,time:500,autoComplate:!0,resetOnComplete:!0},e),this.reset()}n.prototype.reset=function(){this.p=this.options.min,this.$bar.parent().removeClass("show"),this.started=!1},n.prototype.progress=function(n,e){this.started||(this.started=!0,this.$bar.width(0),this.$bar.parent().addClass("show")),this.p=Math.max(Math.min(n,this.options.max),this.options.min),this.options.autoComplate&&this.p==this.options.max?this.complete(e):(this.$bar.stop(!0,!1).animate({width:this.p/this.options.max*100+"%"},this.options.time,t.easing.def),e&&this.$bar.promise().done((function(){e()})))},n.prototype.complete=function(n){var e=this;this.p=this.options.max,this.$bar.stop(!0,!1).animate({width:"100%"},this.options.time,t.easing.def).promise().done((function(){e.options.resetOnComplete&&e.reset(),n&&n()}))};var e={};e.transitionend=function(t){if(!Modernizr.csstransitions)return!1;var n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};return!!n[Modernizr.prefixed("transition")]&&n[Modernizr.prefixed("transition")]}(),e.transitionend&&(t.event.special[e.transitionend]={bindType:e.transitionend,delegateType:e.transitionend,handle:function(n){if(t(n.target).is(this))return n.handleObj.handler.apply(this,arguments)}});var i={apply:function(n,e,i,s){var a=t.Deferred(),o=n+" --\x3e *",r=n+" --\x3e "+e,l="* --\x3e "+e,d=t.Queue();return r in this.fx?d.append(this.fx[r](n,e,i,s)):o in this.fx?d.append(this.fx[o](n,e,i,s)):l in this.fx?d.append(this.fx[l](n,e,i,s)):"* --\x3e *"in this.fx&&d.append(this.fx["* --\x3e *"](n,e,i,s)),d.promise.done((function(){a.resolve()})),a.promise()},fx:{"* --\x3e *":function(n,i,a,o){return function(){var o=this,r=t("body"),l=function(i){i.target===i.currentTarget&&(d.off(e.transitionend).trigger("remove.page.bq").remove(),c.css("height","").removeClass("show"),"top"==n&&r.removeClass("from-index").addClass("sub"),"portfolio-detail"==n&&r.removeClass("no-footer"),t("#contents",r).css("height","").removeClass("trans"),o.resolve())},d=t("#"+n,r),c=a.find("#"+i),h=d.height(),u=t(window).height()-60;h<u&&(h=u),t("#contents",r).height(h).addClass("trans"),d.height(h),"top"==n?r.removeClass("index").addClass("from-index"):"top"==i&&r.removeClass("sub").addClass("index"),"portfolio-detail"==i&&r.addClass("no-footer"),e.transitionend?(c.css(Modernizr.prefixedCSS("transform"),"translate(0,"+t(window).height()+"px)").addClass("show"),d.after(c),s(n,i,a),setTimeout((function(){c.get(0).clientHeight;c.css(Modernizr.prefixedCSS("transform"),"")}),0),d.addClass("moveUp"),d.on(e.transitionend,l)):(c.css(Modernizr.prefixedCSS("transform"),"translate(0,"+t(window).height()+"px)").addClass("show"),d.after(c),s(n,i,a),d.addClass("moveUp"),setTimeout(l,1100)),"top"!=i&&c.height()<u&&c.height(u)}},"news-detail --\x3e news-detail":function(n,i,s,a){return function(){var o=this,r=t("body").find("#"+n),l=s.find("#"+i),d=t('<div class="slide-container"></div>'),c=t('<div class="slide-content"></div>');t(".entry-detail",r).wrapInner(c);var h=t(".entry-detail .slide-content",r);t(".entry-detail",l).wrapInner(c);var u=t(".entry-detail .slide-content",l);h.after(u),t(".entry-detail",r).wrapInner(d),r.find('.paginate .next a[href$="'+a.to.path+'"]').length?(h.addClass("slide-out slide-right-out"),u.addClass("slide-right-in")):(h.addClass("slide-out slide-left-out"),u.addClass("slide-left-in"));var f=0,p=function(n){n.target===n.currentTarget&&(++f<2||(r.find(".paginate").html(l.find(".paginate").html()),t(".entry-detail").append(u.children()),t(".entry-detail .slide-container").remove(),o.resolve()))};e.transitionend?(r.find(".slide-content").on(e.transitionend,p),setTimeout((function(){r.find(".slide-content").each((function(){this.clientHeight})),r.find(".slide-content").addClass("play").filter(".slide-out").addClass("cover")}),0)):(r.find(".slide-content").addClass("play").filter(".slide-out").addClass("cover"),f=1,setTimeout(p,1100))}},"portfolio-detail --\x3e portfolio-detail":function(n,i,s,a){return function(){var o=this,r=t("body"),l=t("#"+n,r),d=s.find("#"+i),c=t('<div class="slide-container"></div>'),h=t('<div class="slide-content"></div>');t("#photo, #info",l).wrapInner(h);var u=t("#photo .slide-content",l),f=t("#info .slide-content",l);t("#photo, #info",d).wrapInner(h);var p=t("#photo .slide-content",d),g=t("#info .slide-content",d),v=t(window).height()-60;u.height()<v&&u.height(v),p.height()<v&&p.height(v),u.after(p),f.after(g),t("#photo",l).wrapInner(c),t("#info",l).wrapInner(c),t(".entry-detail",g).mCustomScrollbar(),t("#info",l).find('.paginate .prev a[href$="'+a.from.path+'"]').length?(u.addClass("slide-out slide-right-out"),f.addClass("slide-out slide-right-out"),p.addClass("slide-right-in"),g.addClass("slide-right-in")):(u.addClass("slide-out slide-left-out"),f.addClass("slide-out slide-left-out"),p.addClass("slide-left-in"),g.addClass("slide-left-in"));var m=0,C=function(n){n.target===n.currentTarget&&(++m<3||(t("#photo",l).append(p.children()),t("#info",l).append(g.children()),t("#photo .slide-container, #info .slide-container").remove(),t(window).trigger("resize"),o.resolve()))};e.transitionend?(l.find(".slide-content").on(e.transitionend,C),setTimeout((function(){l.find(".slide-content").each((function(){this.clientHeight})),l.find(".slide-content").addClass("play").filter(".slide-out").addClass("cover")}),0)):(l.find(".slide-content").addClass("play").filter(".slide-out").addClass("cover"),m=3,setTimeout(C,1100))}}}};function s(n,e,i){t("#menu").empty().append(i.find("#menu").children());var s=i.find("#gnavi .label").text();if(t("#gnavi .label").fadeTo(250,0,(function(){t(this).text(s),t(this).fadeTo(250,1)})),t("#cnavi").length){var a=!1;i.find("#cnavi .label").length&&(a=i.find("#cnavi .label").html()),t("#cnavi").fadeOut(250,(function(){!1!==a&&(t(this).find(".label").html(a),t(this).fadeIn(250))}))}else i.find("#cnavi").length&&(t("#gnavi").after(i.find("#cnavi").fadeOut(0)),t("#cnavi").delay(250).fadeIn(250));bq.ui.langnavi.reset(),t(".nav-links:has(.sub-nav-links) .sub-nav-links").css("display","none"),t(".nav-links:has(.sub-nav-links) > ul > .current").trigger("mouseover")}var a,o=t.Queue(),r=[],l=null,d=null,c=!1;function h(){var e,s=function(){if(0==r.length)return!1;var t=r[r.length-1];return r=[],t}();if(0==s)return this.resolve();t("body").addClass("page-loading"),a||(e=t('<div class="bar" />'),t('<div id="loading-progress" class="progress" />').append(e).prependTo("body"),a=new n(e));var o=t.Deferred();t(document).on("scroll.page.bq mousewheel.page.bq",(function(){return!1})),a.progress(0),t.when(t.get(s.to.path),t(window).scrollTop()>0?t(/(webkit)[ \/]([\w.]+)/i.test(navigator.userAgent)?"body":"html").delay(500).animate({scrollTop:0},500).promise():function(n){var e=t.Deferred();return setTimeout((function(){e.resolve()}),500),e.promise()}()).done((function(n){(function(n,e){var s=t.Deferred(),o=u(n),r=n.match(/<title>(.*)<\/title>/)[1],l=t("#contents > .content").attr("id"),d=o.find("#contents > .content").attr("id");return i.apply(l,d,o,e).done((function(){t(window).trigger("enter.page.bq"),t("title").text(r),t(document).off("scroll.page.bq mousewheel.page.bq"),s.resolve()})),a.complete((function(){t("body").removeClass("page-loading")})),s.promise()})(n[0],s).done(o.resolve),d=s.to})),o.done(this.resolve)}function u(n){var e=document.createElement("div");return e.innerHTML=n,t(e)}var f={clickEvent:"ontouchstart"in window?"touchstart.page.contact":"click.page.contact"},p=t.get("/contact").done((function(n){f.title=n.match(/<title>(.*)<\/title>/)[1];var e=u(n).find("#contents > .content");e.removeClass("content").addClass("overlay"),e.find(".lang-nav").remove(),f.content=e,t("#wrap").append(e)}));function g(){f.content.addClass("show"),t("title").text(f.title),t(document).on(f.clickEvent+".close",(function(n){t(n.target).closest(bq.ui.navigation.defaults.cancelClick).length||(t(document).off(f.clickEvent+".close"),bq.page.back())}))}bq.page.exit("/contact",(function(n,e,i){t(document).off(f.clickEvent+".close"),f.content.removeClass("show"),setTimeout((function(){e()}),500),t('#menu a[href="/contact"]').removeClass("current")})),bq.page("/contact",(function(n,e){if(n.init)return e();"resolved"!=p.state()?p.done(g):g(),t('#menu a[href="/contact"]').addClass("current"),t("body").hasClass("cnav-collapse")&&bq.ui.navigation.closeMenu()})),bq.page.exit("*",(function(n,e,i){return 0===i.path.indexOf("/contact")?e():0===n.path.indexOf("/contact")&&d&&d.path==i.path?(c=!0,e()):(l=n,t(window).trigger("exit.page.bq"),bq.ui.navigation.closeMenu(),void e())})),bq.page("*",(function(n,e){if(c)c=!1;else{if(n.init)return d=n,void t((function(){t(window).trigger("enter.page.bq")}));var i;i={from:l,to:n},r[r.length]=i,o.append(h)}})),bq.page(),t(document).on("click","a:not(.external)",(function(n){if(t(this).hasClass("current")&&n.preventDefault(),!bq.page.sameOrigin(this.href))return n.preventDefault(),window.open(this.href,"_blank"),!1}))}(jQuery);